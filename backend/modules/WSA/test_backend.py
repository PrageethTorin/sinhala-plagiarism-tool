import requests

URL = "http://127.0.0.1:8000/api/check-wsa"

def run_categorization_test():
    test_paragraph = (
        "‡∂∏‡∂∏ ‡∂Ö‡∂Ø ‡∂ã‡∂Ø‡∑ö ‡∂¥‡∑è‡∑É‡∂Ω‡∑ä ‡∂ú‡∑í‡∂∫‡∑ô‡∂∏‡∑í. ‡∂ë‡∑Ñ‡∑í‡∂Ø‡∑ì ‡∂∏‡∂∏ ‡∂∏‡∂ú‡∑ö ‡∂∏‡∑í‡∂≠‡∑î‡∂ª‡∂±‡∑ä ‡∑Ñ‡∂∏‡∑î‡∑Ä‡∑î‡∂´‡∑è. " 
        "‡∂Ö‡∂¥‡∑í ‡∑Ñ‡∑ê‡∂∏‡∑ù‡∂∏ ‡∂ë‡∂ö‡∂≠‡∑î ‡∑Ä‡∑ô‡∂Ω‡∑è ‡∑É‡∑ô‡∂Ω‡∑ä‡∂Ω‡∂∏‡∑ä ‡∂ö‡∑Ö‡∑è ‡∑É‡∑Ñ ‡∂ú‡∑î‡∂ª‡∑î‡∑Ä‡∂ª‡∑î ‡∂Ö‡∂¥‡∑í‡∂ß ‡∑Ñ‡∑ú‡∂≥‡∑í‡∂±‡∑ä ‡∂â‡∂ú‡∑ê‡∂±‡∑ä‡∑Ä‡∑ñ‡∑Ä‡∑è. " 
        "‡∂¥‡∑ä‚Äç‡∂ª‡∂¢‡∑è‡∂±‡∂± ‡∂∏‡∂±‡∑ù‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∂≠‡∑ä‡∂∏‡∂ö ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ö‡∑Å‡∂∫‡∂±‡∑ä ‡∂∏‡∂ü‡∑í‡∂±‡∑ä ‡∂∏‡∑è‡∂±‡∑Ä ‡∂†‡∑í‡∂±‡∑ä‡∂≠‡∂± ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫ ‡∑Ä‡∑í‡∂ú‡∑ä‚Äç‡∂ª‡∑Ñ ‡∂ö‡∑ô‡∂ª‡∑ö. " 
        "‡∂¥‡∑è‡∑É‡∂Ω‡∑ö ‡∑Ä‡∑ê‡∂© ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä ‡∑Ä‡∑ì ‡∂∏‡∂∏ ‡∂ú‡∑ô‡∂Ø‡∂ª ‡∂Ü‡∑Ä‡∑è ‡∑É‡∑Ñ ‡∂∏‡∂∏ ‡∂ú‡∑ô‡∂Ø‡∂ª ‡∂á‡∑Ä‡∑í‡∂≠‡∑ä ‡∂Ö‡∂∏‡∑ä‡∂∏‡∑è‡∂ß ‡∂ã‡∂Ø‡∑Ä‡∑ä ‡∂ö‡∑Ö‡∑è. " 
        "‡∂â‡∂±‡∑ä‡∂¥‡∑É‡∑î ‡∂∏‡∂∏ ‡∂∏‡∂ú‡∑ö ‡∂ú‡∑ô‡∂Ø‡∂ª ‡∑Ä‡∑ê‡∂© ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä ‡∂ö‡∑Ö‡∑è ‡∑É‡∑Ñ ‡∂ª‡∑ë‡∂ß ‡∂∏‡∂∏ ‡∂¥‡∑ú‡∂≠‡∂ö‡∑ä ‡∂ö‡∑í‡∂∫‡∑ô‡∑Ä‡∑ä‡∑Ä‡∑è. " 
        "‡∂ú‡∑ù‡∂Ω‡∑ì‡∂∫‡∂ö‡∂ª‡∂´ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∂´‡∂≠‡∑è‡∑Ä‡∂±‡∑ä ‡∑Ñ‡∂∏‡∑î‡∑Ä‡∑ö ‡∂Ø‡∑ö‡∑Å‡∑ì‡∂∫ ‡∂Ö‡∂±‡∂±‡∑ä‚Äç‡∂∫‡∂≠‡∑è‡∑Ä‡∂∫ ‡∑É‡∑î‡∂ª‡∂ö‡∑ä‡∑Ç‡∑í‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∂Ö‡∂≠‡∑ä‚Äç‡∂∫‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∂ö‡∂ª‡∑î‡∂´‡∂ö‡∑í. " 
        "‡∑Ñ‡∑ô‡∂ß‡∂≠‡∑ä ‡∂∏‡∂∏ ‡∑Ä‡∑ö‡∂Ω‡∑è‡∑É‡∂±‡∑í‡∂±‡∑ä ‡∂¥‡∑è‡∑É‡∂Ω‡∑ä ‡∂∫‡∂±‡∑Ä‡∑è ‡∑É‡∑Ñ ‡∂∏‡∂∏ ‡∂â‡∂ú‡∑ô‡∂±‡∑ì‡∂∏‡∂ß ‡∂â‡∂≠‡∑è‡∂∏‡∂≠‡∑ä ‡∂Ü‡∂Ø‡∂ª‡∂∫ ‡∂ö‡∂ª‡∂±‡∑Ä‡∑è. " 
        "‡∂Ö‡∂¥‡∑ö ‡∂ª‡∂ß‡∑ö ‡∂Ö‡∂±‡∑è‡∂ú‡∂≠‡∂∫ ‡∂â‡∂ú‡∑ô‡∂± ‡∂ú‡∂±‡∑ä‡∂±‡∑è ‡∂Ø‡∂ª‡∑î‡∑Ä‡∂±‡∑ä‡∂∫ ,‡∂Ö‡∂¥‡∑í ‡∑É‡∑ê‡∂∏‡∑Ä‡∑í‡∂ß‡∂∏ ‡∂ª‡∂ß‡∂ß ‡∑É‡∑ö‡∑Ä‡∂∫ ‡∂ö‡∂ª‡∂∏‡∑î. " 
        "‡∑É‡∂Ç‡∑É‡∑ä‡∂ö‡∑ò‡∂≠‡∑í‡∂ö ‡∑Ä‡∑í‡∑Ä‡∑í‡∂∞‡∂≠‡∑ä‡∑Ä‡∂∫ ‡∑É‡∑Ñ ‡∑É‡∑Ñ‡∂¢‡∑ì‡∑Ä‡∂±‡∂∫ ‡∂≠‡∑î‡∑Ö‡∑í‡∂±‡∑ä ‡∂¢‡∑è‡∂≠‡∑í‡∂ö ‡∑É‡∂Ç‡∑Ä‡∂ª‡∑ä‡∂∞‡∂±‡∂∫ ‡∂ã‡∂≠‡∑ä‡∂≠‡∑ö‡∂¢‡∂±‡∂∫ ‡∂ö‡∑Ö ‡∑Ñ‡∑ê‡∂ö‡∑í‡∂∫. " 
        "‡∂ú‡∑ù‡∂Ω‡∑ì‡∂∫‡∂ö‡∂ª‡∂´ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∂´‡∂≠‡∑è‡∑Ä‡∂±‡∑ä ‡∑Ñ‡∂∏‡∑î‡∑Ä‡∑ö ‡∂Ø‡∑ö‡∑Å‡∑ì‡∂∫ ‡∂Ö‡∂±‡∂±‡∑ä‚Äç‡∂∫‡∂≠‡∑è‡∑Ä‡∂∫ ‡∑É‡∑î‡∂ª‡∂ö‡∑ä‡∑Ç‡∑í‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∂Ö‡∂≠‡∑ä‚Äç‡∂∫‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∂ö‡∂ª‡∑î‡∂´‡∂ö‡∑í. " 
        "‡∑Ñ‡∑ô‡∂ß‡∂≠‡∑ä ‡∂∏‡∂∏ ‡∑Ä‡∑ö‡∂Ω‡∑è‡∑É‡∂±‡∑í‡∂±‡∑ä ‡∂¥‡∑è‡∑É‡∂Ω‡∑ä ‡∂∫‡∂±‡∑Ä‡∑è ‡∑É‡∑Ñ ‡∂∏‡∂∏ ‡∂â‡∂ú‡∑ô‡∂±‡∑ì‡∂∏‡∂ß ‡∂â‡∂≠‡∑è‡∂∏‡∂≠‡∑ä ‡∂Ü‡∂Ø‡∂ª‡∂∫ ‡∂ö‡∂ª‡∂±‡∑Ä‡∑è. " 
        "‡∂Ö‡∂¥‡∑ö ‡∂ª‡∂ß‡∑ö ‡∂Ö‡∂±‡∑è‡∂ú‡∂≠‡∂∫ ‡∂â‡∂ú‡∑ô‡∂± ‡∂ú‡∂±‡∑ä‡∂±‡∑è ‡∂Ø‡∂ª‡∑î‡∑Ä‡∂±‡∑ä‡∂∫ ,‡∂Ö‡∂¥‡∑í ‡∑É‡∑ê‡∂∏‡∑Ä‡∑í‡∂ß‡∂∏ ‡∂ª‡∂ß‡∂ß ‡∑É‡∑ö‡∑Ä‡∂∫ ‡∂ö‡∂ª‡∂∏‡∑î. " 
        "‡∑É‡∂Ç‡∑É‡∑ä‡∂ö‡∑ò‡∂≠‡∑í‡∂ö ‡∑Ä‡∑í‡∑Ä‡∑í‡∂∞‡∂≠‡∑ä‡∑Ä‡∂∫ ‡∑É‡∑Ñ ‡∑É‡∑Ñ‡∂¢‡∑ì‡∑Ä‡∂±‡∂∫ ‡∂≠‡∑î‡∑Ö‡∑í‡∂±‡∑ä ‡∂¢‡∑è‡∂≠‡∑í‡∂ö ‡∑É‡∂Ç‡∑Ä‡∂ª‡∑ä‡∂∞‡∂±‡∂∫ ‡∂ã‡∂≠‡∑ä‡∂≠‡∑ö‡∂¢‡∂±‡∂∫ ‡∂ö‡∑Ö ‡∑Ñ‡∑ê‡∂ö‡∑í‡∂∫. "
    )

    try:
        response = requests.post(URL, json={"text": test_paragraph})
        data = response.json()
        
        print("‚úÖ RESEARCH ANALYSIS: AUTHORSHIP CATEGORIZATION")
        print(f"üìä Style Change Ratio: {data['style_change_ratio']}%")
        print("-" * 80)
        print(f"{'ID':<4} | {'Len':<5} | {'TTR %':<10} | {'Categorization'}")
        print("-" * 60)
        
        for s in data['sentence_map']:
            status = "üö© RICHNESS SHIFT" if s['is_outlier'] else "‚úì Baseline"
            print(f"S{s['id']:<3} | {s['length']:<5} | {s['lexical_ttr']:<10} | {status}")
            
    except Exception as e:
        print(f"‚ùå Error: {e}")

if __name__ == "__main__":
    run_categorization_test()